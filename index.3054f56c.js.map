{"mappings":"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","sources":["src/js/lightcase.js"],"sourcesContent":["/*\n * Lightcase - jQuery Plugin\n * The smart and flexible Lightbox Plugin.\n *\n * @author\t\tCornel Boppart <cornel@bopp-art.com>\n * @copyright\tAuthor\n *\n * @version\t\t2.4.0 (09/04/2017)\n */\n\n;(function ($) {\n\n\t'use strict';\n\n\tvar _self = {\n\t\tcache: {},\n\n\t\tsupport: {},\n\n\t\tobjects: {},\n\n\t\t/**\n\t\t * Initializes the plugin\n\t\t *\n\t\t * @param\t{object}\toptions\n\t\t * @return\t{object}\n\t\t */\n\t\tinit: function (options) {\n\t\t\treturn this.each(function () {\n\t\t\t\t$(this).unbind('click.lightcase').bind('click.lightcase', function (event) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t$(this).lightcase('start', options);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Starts the plugin\n\t\t *\n\t\t * @param\t{object}\toptions\n\t\t * @return\t{void}\n\t\t */\n\t\tstart: function (options) {\n\t\t\t_self.origin = lightcase.origin = this;\n\n\t\t\t_self.settings = lightcase.settings = $.extend(true, {\n\t\t\t\tidPrefix: 'lightcase-',\n\t\t\t\tclassPrefix: 'lightcase-',\n\t\t\t\tattrPrefix: 'lc-',\n\t\t\t\ttransition: 'elastic',\n\t\t\t\ttransitionOpen: null,\n\t\t\t\ttransitionClose: null,\n\t\t\t\ttransitionIn: null,\n\t\t\t\ttransitionOut: null,\n\t\t\t\tcssTransitions: true,\n\t\t\t\tspeedIn: 250,\n\t\t\t\tspeedOut: 250,\n\t\t\t\twidth: null,\n\t\t\t\theight: null,\n\t\t\t\tmaxWidth: 800,\n\t\t\t\tmaxHeight: 500,\n\t\t\t\tforceWidth: false,\n\t\t\t\tforceHeight: false,\n\t\t\t\tliveResize: true,\n\t\t\t\tfullScreenModeForMobile: true,\n\t\t\t\tmobileMatchExpression: /(iphone|ipod|ipad|android|blackberry|symbian)/,\n\t\t\t\tdisableShrink: false,\n\t\t\t\tfixedRatio: true,\n\t\t\t\tshrinkFactor: .75,\n\t\t\t\toverlayOpacity: .9,\n\t\t\t\tslideshow: false,\n\t\t\t\tslideshowAutoStart: true,\n\t\t\t\ttimeout: 5000,\n\t\t\t\tswipe: true,\n\t\t\t\tuseKeys: true,\n\t\t\t\tuseCategories: true,\n\t\t\t\tuseAsCollection: false,\n\t\t\t\tnavigateEndless: true,\n\t\t\t\tcloseOnOverlayClick: true,\n\t\t\t\ttitle: null,\n\t\t\t\tcaption: null,\n\t\t\t\tshowTitle: true,\n\t\t\t\tshowCaption: true,\n\t\t\t\tshowSequenceInfo: true,\n\t\t\t\tinline: {\n\t\t\t\t\twidth: 'auto',\n\t\t\t\t\theight: 'auto'\n\t\t\t\t},\n\t\t\t\tajax: {\n\t\t\t\t\twidth: 'auto',\n\t\t\t\t\theight: 'auto',\n\t\t\t\t\ttype: 'get',\n\t\t\t\t\tdataType: 'html',\n\t\t\t\t\tdata: {}\n\t\t\t\t},\n\t\t\t\tiframe: {\n\t\t\t\t\twidth: 800,\n\t\t\t\t\theight: 500,\n\t\t\t\t\tframeborder: 0\n\t\t\t\t},\n\t\t\t\tflash: {\n\t\t\t\t\twidth: 400,\n\t\t\t\t\theight: 205,\n\t\t\t\t\twmode: 'transparent'\n\t\t\t\t},\n\t\t\t\tvideo: {\n\t\t\t\t\twidth: 400,\n\t\t\t\t\theight: 225,\n\t\t\t\t\tposter: '',\n\t\t\t\t\tpreload: 'auto',\n\t\t\t\t\tcontrols: true,\n\t\t\t\t\tautobuffer: true,\n\t\t\t\t\tautoplay: true,\n\t\t\t\t\tloop: false\n\t\t\t\t},\n\t\t\t\tattr: 'data-rel',\n\t\t\t\thref: null,\n\t\t\t\ttype: null,\n\t\t\t\ttypeMapping: {\n\t\t\t\t\t'image': 'jpg,jpeg,gif,png,bmp',\n\t\t\t\t\t'flash': 'swf',\n\t\t\t\t\t'video': 'mp4,mov,ogv,ogg,webm',\n\t\t\t\t\t'iframe': 'html,php',\n\t\t\t\t\t'ajax': 'json,txt',\n\t\t\t\t\t'inline': '#'\n\t\t\t\t},\n\t\t\t\terrorMessage: function () {\n\t\t\t\t\treturn '<p class=\"' + _self.settings.classPrefix + 'error\">' + _self.settings.labels['errorMessage'] + '</p>';\n\t\t\t\t},\n\t\t\t\tlabels: {\n\t\t\t\t\t'errorMessage': 'Source could not be found...',\n\t\t\t\t\t'sequenceInfo.of': ' of ',\n\t\t\t\t\t'close': 'Close',\n\t\t\t\t\t'navigator.prev': 'Prev',\n\t\t\t\t\t'navigator.next': 'Next',\n \t\t\t\t\t'navigator.play': 'Play',\n\t\t\t\t\t'navigator.pause': 'Pause'\n\t\t\t\t},\n\t\t\t\tmarkup: function () {\n\t\t\t\t\t_self.objects.body.append(\n\t\t\t\t\t\t_self.objects.overlay = $('<div id=\"' + _self.settings.idPrefix + 'overlay\"></div>'),\n\t\t\t\t\t\t_self.objects.loading = $('<div id=\"' + _self.settings.idPrefix + 'loading\" class=\"' + _self.settings.classPrefix + 'icon-spin\"></div>'),\n\t\t\t\t\t\t_self.objects.case = $('<div id=\"' + _self.settings.idPrefix + 'case\" aria-hidden=\"true\" role=\"dialog\"></div>')\n\t\t\t\t\t);\n\t\t\t\t\t_self.objects.case.after(\n\t\t\t\t\t\t_self.objects.close = $('<a href=\"#\" class=\"' + _self.settings.classPrefix + 'icon-close\"><span>' + _self.settings.labels['close'] + '</span></a>'),\n\t\t\t\t\t\t_self.objects.nav = $('<div id=\"' + _self.settings.idPrefix + 'nav\"></div>')\n\t\t\t\t\t);\n\t\t\t\t\t_self.objects.nav.append(\n\t\t\t\t\t\t_self.objects.prev = $('<a href=\"#\" class=\"' + _self.settings.classPrefix + 'icon-prev\"><span>' + _self.settings.labels['navigator.prev'] + '</span></a>').hide(),\n\t\t\t\t\t\t_self.objects.next = $('<a href=\"#\" class=\"' + _self.settings.classPrefix + 'icon-next\"><span>' + _self.settings.labels['navigator.next'] + '</span></a>').hide(),\n\t\t\t\t\t\t_self.objects.play = $('<a href=\"#\" class=\"' + _self.settings.classPrefix + 'icon-play\"><span>' + _self.settings.labels['navigator.play'] + '</span></a>').hide(),\n\t\t\t\t\t\t_self.objects.pause = $('<a href=\"#\" class=\"' + _self.settings.classPrefix + 'icon-pause\"><span>' + _self.settings.labels['navigator.pause'] + '</span></a>').hide()\n\t\t\t\t\t);\n\t\t\t\t\t_self.objects.case.append(\n\t\t\t\t\t\t_self.objects.content = $('<div id=\"' + _self.settings.idPrefix + 'content\"></div>'),\n\t\t\t\t\t\t_self.objects.info = $('<div id=\"' + _self.settings.idPrefix + 'info\"></div>')\n\t\t\t\t\t);\n\t\t\t\t\t_self.objects.content.append(\n\t\t\t\t\t\t_self.objects.contentInner = $('<div class=\"' + _self.settings.classPrefix + 'contentInner\"></div>')\n\t\t\t\t\t);\n\t\t\t\t\t_self.objects.info.append(\n\t\t\t\t\t\t_self.objects.sequenceInfo = $('<div id=\"' + _self.settings.idPrefix + 'sequenceInfo\"></div>'),\n\t\t\t\t\t\t_self.objects.title = $('<h4 id=\"' + _self.settings.idPrefix + 'title\"></h4>'),\n\t\t\t\t\t\t_self.objects.caption = $('<p id=\"' + _self.settings.idPrefix + 'caption\"></p>')\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tonInit: {},\n\t\t\t\tonStart: {},\n\t\t\t\tonFinish: {},\n\t\t\t\tonResize: {},\n\t\t\t\tonClose: {},\n\t\t\t\tonCleanup: {}\n\t\t\t}, \n\t\t\toptions,\n\t\t\t// Load options from data-lc-options attribute\n\t\t\t_self.origin.data ? _self.origin.data('lc-options') : {});\n\n\t\t\t_self.objects.document = $('html');\n\t\t\t_self.objects.body = $('body');\n\n\t\t\t// Call onInit hook functions\n\t\t\t_self._callHooks(_self.settings.onInit);\n\n\t\t\t_self.objectData = _self._setObjectData(this);\n\n\t\t\t_self._addElements();\n\t\t\t_self._open();\n\n\t\t\t_self.dimensions = _self.getViewportDimensions();\n\t\t},\n\n\t\t/**\n\t\t * Getter method for objects\n\t\t *\n\t\t * @param\t{string}\tname\n\t\t * @return\t{object}\n\t\t */\n\t\tget: function (name) {\n\t\t\treturn _self.objects[name];\n\t\t},\n\n\t\t/**\n\t\t * Getter method for objectData\n\t\t *\n\t\t * @return\t{object}\n\t\t */\n\t\tgetObjectData: function () {\n\t\t\treturn _self.objectData;\n\t\t},\n\n\t\t/**\n\t\t * Sets the object data\n\t\t *\n\t\t * @param\t{object}\tobject\n\t\t * @return\t{object}\tobjectData\n\t\t */\n\t\t_setObjectData: function (object) {\n\t\t \tvar $object = $(object),\n\t\t\t\tobjectData = {\n\t\t\t\tthis: $(object),\n\t\t\t\ttitle: _self.settings.title || $object.attr(_self._prefixAttributeName('title')) || $object.attr('title'),\n\t\t\t\tcaption: _self.settings.caption || $object.attr(_self._prefixAttributeName('caption')) || $object.children('img').attr('alt'),\n\t\t\t\turl: _self._determineUrl(),\n\t\t\t\trequestType: _self.settings.ajax.type,\n\t\t\t\trequestData: _self.settings.ajax.data,\n\t\t\t\trequestDataType: _self.settings.ajax.dataType,\n\t\t\t\trel: $object.attr(_self._determineAttributeSelector()),\n\t\t\t\ttype: _self.settings.type || _self._verifyDataType(_self._determineUrl()),\n\t\t\t\tisPartOfSequence: _self.settings.useAsCollection || _self._isPartOfSequence($object.attr(_self.settings.attr), ':'),\n\t\t\t\tisPartOfSequenceWithSlideshow: _self._isPartOfSequence($object.attr(_self.settings.attr), ':slideshow'),\n\t\t\t\tcurrentIndex: $(_self._determineAttributeSelector()).index($object),\n\t\t\t\tsequenceLength: $(_self._determineAttributeSelector()).length\n\t\t\t};\n\n\t\t\t// Add sequence info to objectData\n\t\t\tobjectData.sequenceInfo = (objectData.currentIndex + 1) + _self.settings.labels['sequenceInfo.of'] + objectData.sequenceLength;\n\n\t\t\t// Add next/prev index\n\t\t\tobjectData.prevIndex = objectData.currentIndex - 1;\n\t\t\tobjectData.nextIndex = objectData.currentIndex + 1;\n\n\t\t\treturn objectData;\n\t\t},\n\n\t\t/**\n\t\t * Prefixes a data attribute name with defined name from 'settings.attrPrefix'\n\t\t * to ensure more uniqueness for all lightcase related/used attributes.\n\t\t *\n\t\t * @param\t{string}\tname\n\t\t * @return\t{string}\n\t\t */\n\t\t_prefixAttributeName: function (name) {\n\t\t\treturn 'data-' + _self.settings.attrPrefix + name;\n\t\t},\n\n\t\t/**\n\t\t * Determines the link target considering 'settings.href' and data attributes\n\t\t * but also with a fallback to the default 'href' value.\n\t\t *\n\t\t * @return\t{string}\n\t\t */\n\t\t_determineLinkTarget: function () {\n\t\t\treturn _self.settings.href || $(_self.origin).attr(_self._prefixAttributeName('href')) || $(_self.origin).attr('href');\n\t\t},\n\n\t\t/**\n\t\t * Determines the attribute selector to use, depending on\n\t\t * whether categorized collections are beeing used or not.\n\t\t *\n\t\t * @return\t{string}\tselector\n\t\t */\n\t\t_determineAttributeSelector: function () {\n\t\t\tvar\t$origin = $(_self.origin),\n\t\t\t\tselector = '';\n\n\t\t\tif (typeof _self.cache.selector !== 'undefined') {\n\t\t\t\tselector = _self.cache.selector;\n\t\t\t} else if (_self.settings.useCategories === true && $origin.attr(_self._prefixAttributeName('categories'))) {\n\t\t\t\tvar\tcategories = $origin.attr(_self._prefixAttributeName('categories')).split(' ');\n\n\t\t\t\t$.each(categories, function (index, category) {\n\t\t\t\t\tif (index > 0) {\n\t\t\t\t\t\tselector += ',';\n\t\t\t\t\t}\n\t\t\t\t\tselector += '[' + _self._prefixAttributeName('categories') + '~=\"' + category + '\"]';\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tselector = '[' + _self.settings.attr + '=\"' + $origin.attr(_self.settings.attr) + '\"]';\n\t\t\t}\n\n\t\t\t_self.cache.selector = selector;\n\n\t\t\treturn selector;\n\t\t},\n\n\t\t/**\n\t\t * Determines the correct resource according to the\n\t\t * current viewport and density.\n\t\t *\n\t\t * @return\t{string}\turl\n\t\t */\n\t\t_determineUrl: function () {\n\t\t\tvar\tdataUrl = _self._verifyDataUrl(_self._determineLinkTarget()),\n\t\t\t\twidth = 0,\n\t\t\t\tdensity = 0,\n\t\t\t\tsupportLevel = '',\n\t\t\t\turl;\n\n\t\t\t$.each(dataUrl, function (index, src) {\n\t\t\t\tswitch (_self._verifyDataType(src.url)) {\n\t\t\t\t\tcase 'video':\n\t\t\t\t\t\tvar\tvideo = document.createElement('video'),\n\t\t\t\t\t\t\tvideoType = _self._verifyDataType(src.url) + '/' + _self._getFileUrlSuffix(src.url);\n\n\t\t\t\t\t\t// Check if browser can play this type of video format\n\t\t\t\t\t\tif (supportLevel !== 'probably' && supportLevel !== video.canPlayType(videoType) && video.canPlayType(videoType) !== '') {\n\t\t\t\t\t\t\tsupportLevel = video.canPlayType(videoType);\n\t\t\t\t\t\t\turl = src.url;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t// Check density\n\t\t\t\t\t\t\t_self._devicePixelRatio() >= src.density &&\n\t\t\t\t\t\t\tsrc.density >= density &&\n\t\t\t\t\t\t\t// Check viewport width\n\t\t\t\t\t\t\t_self._matchMedia()('screen and (min-width:' + src.width + 'px)').matches &&\n\t\t\t\t\t\t\tsrc.width >= width\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\twidth = src.width;\n\t\t\t\t\t\t\tdensity = src.density;\n\t\t\t\t\t\t\turl = src.url;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn url;\n\t\t},\n\n\t\t/**\n\t\t * Normalizes an url and returns information about the resource path,\n\t\t * the viewport width as well as density if defined.\n\t\t *\n\t\t * @param\t{string}\turl\tPath to resource in format of an url or srcset\n\t\t * @return\t{object}\n\t\t */\n\t\t_normalizeUrl: function (url) {\n\t\t\tvar srcExp = /^\\d+$/;\n\n\t\t\treturn url.split(',').map(function (str) {\n\t\t\t\tvar src = {\n\t\t\t\t\twidth: 0,\n\t\t\t\t\tdensity: 0\n\t\t\t\t};\n\n\t\t\t\tstr.trim().split(/\\s+/).forEach(function (url, i) {\n\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\treturn src.url = url;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar value = url.substring(0, url.length - 1),\n\t\t\t\t\t\tlastChar = url[url.length - 1],\n\t\t\t\t\t\tintVal = parseInt(value, 10),\n\t\t\t\t\t\tfloatVal = parseFloat(value);\n\t\t\t\t\tif (lastChar === 'w' && srcExp.test(value)) {\n\t\t\t\t\t\tsrc.width = intVal;\n\t\t\t\t\t} else if (lastChar === 'h' && srcExp.test(value)) {\n\t\t\t\t\t\tsrc.height = intVal;\n\t\t\t\t\t} else if (lastChar === 'x' && !isNaN(floatVal)) {\n\t\t\t\t\t\tsrc.density = floatVal;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn src;\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Verifies if the link is part of a sequence\n\t\t *\n\t\t * @param\t{string}\trel\n\t\t * @param\t{string}\texpression\n\t\t * @return\t{boolean}\n\t\t */\n\t\t_isPartOfSequence: function (rel, expression) {\n\t\t\tvar getSimilarLinks = $('[' + _self.settings.attr + '=\"' + rel + '\"]'),\n\t\t\t\tregexp = new RegExp(expression);\n\n\t\t\treturn (regexp.test(rel) && getSimilarLinks.length > 1);\n\t\t},\n\n\t\t/**\n\t\t * Verifies if the slideshow should be enabled\n\t\t *\n\t\t * @return\t{boolean}\n\t\t */\n\t\tisSlideshowEnabled: function () {\n\t\t\treturn (_self.objectData.isPartOfSequence && (_self.settings.slideshow === true || _self.objectData.isPartOfSequenceWithSlideshow === true));\n\t\t},\n\n\t\t/**\n\t\t * Loads the new content to show\n\t\t *\n\t\t * @return\t{void}\n\t\t */\n\t\t_loadContent: function () {\n\t\t\tif (_self.cache.originalObject) {\n\t\t\t\t_self._restoreObject();\n\t\t\t}\n\n\t\t\t_self._createObject();\n\t\t},\n\n\t\t/**\n\t\t * Creates a new object\n\t\t *\n\t\t * @return\t{void}\n\t\t */\n\t\t_createObject: function () {\n\t\t\tvar $object;\n\n\t\t\t// Create object\n\t\t\tswitch (_self.objectData.type) {\n\t\t\t\tcase 'image':\n\t\t\t\t\t$object = $(new Image());\n\t\t\t\t\t$object.attr({\n\t\t\t\t\t\t// The time expression is required to prevent the binding of an image load\n\t\t\t\t\t\t'src': _self.objectData.url,\n\t\t\t\t\t\t'alt': _self.objectData.title\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'inline':\n\t\t\t\t\t$object = $('<div class=\"' + _self.settings.classPrefix + 'inlineWrap\"></div>');\n\t\t\t\t\t$object.html(_self._cloneObject($(_self.objectData.url)));\n\n\t\t\t\t\t// Add custom attributes from _self.settings\n\t\t\t\t\t$.each(_self.settings.inline, function (name, value) {\n\t\t\t\t\t\t$object.attr(_self._prefixAttributeName(name), value);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ajax':\n\t\t\t\t\t$object = $('<div class=\"' + _self.settings.classPrefix + 'inlineWrap\"></div>');\n\n\t\t\t\t\t// Add custom attributes from _self.settings\n\t\t\t\t\t$.each(_self.settings.ajax, function (name, value) {\n\t\t\t\t\t\tif (name !== 'data') {\n\t\t\t\t\t\t\t$object.attr(_self._prefixAttributeName(name), value);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'flash':\n\t\t\t\t\t$object = $('<embed src=\"' + _self.objectData.url + '\" type=\"application/x-shockwave-flash\"></embed>');\n\n\t\t\t\t\t// Add custom attributes from _self.settings\n\t\t\t\t\t$.each(_self.settings.flash, function (name, value) {\n\t\t\t\t\t\t$object.attr(name, value);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'video':\n\t\t\t\t\t$object = $('<video></video>');\n\t\t\t\t\t$object.attr('src', _self.objectData.url);\n\n\t\t\t\t\t// Add custom attributes from _self.settings\n\t\t\t\t\t$.each(_self.settings.video, function (name, value) {\n\t\t\t\t\t\t$object.attr(name, value);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t$object = $('<iframe></iframe>');\n\t\t\t\t\t$object.attr({\n\t\t\t\t\t\t'src': _self.objectData.url\n\t\t\t\t\t});\n\n\t\t\t\t\t// Add custom attributes from _self.settings\n\t\t\t\t\t$.each(_self.settings.iframe, function (name, value) {\n\t\t\t\t\t\t$object.attr(name, value);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t_self._addObject($object);\n\t\t\t_self._loadObject($object);\n\t\t},\n\n\t\t/**\n\t\t * Adds the new object to the markup\n\t\t *\n\t\t * @param\t{object}\t$object\n\t\t * @return\t{void}\n\t\t */\n\t\t_addObject: function ($object) {\n\t\t\t// Add object to content holder\n\t\t\t_self.objects.contentInner.html($object);\n\n\t\t\t// Start loading\n\t\t\t_self._loading('start');\n\n\t\t\t// Call onStart hook functions\n\t\t\t_self._callHooks(_self.settings.onStart);\n\n\t\t\t// Add sequenceInfo to the content holder or hide if its empty\n\t\t\tif (_self.settings.showSequenceInfo === true && _self.objectData.isPartOfSequence) {\n\t\t\t\t_self.objects.sequenceInfo.html(_self.objectData.sequenceInfo);\n\t\t\t\t_self.objects.sequenceInfo.show();\n\t\t\t} else {\n\t\t\t\t_self.objects.sequenceInfo.empty();\n\t\t\t\t_self.objects.sequenceInfo.hide();\n\t\t\t}\n\t\t\t// Add title to the content holder or hide if its empty\n\t\t\tif (_self.settings.showTitle === true && _self.objectData.title !== undefined && _self.objectData.title !== '') {\n\t\t\t\t_self.objects.title.html(_self.objectData.title);\n\t\t\t\t_self.objects.title.show();\n\t\t\t} else {\n\t\t\t\t_self.objects.title.empty();\n\t\t\t\t_self.objects.title.hide();\n\t\t\t}\n\t\t\t// Add caption to the content holder or hide if its empty\n\t\t\tif (_self.settings.showCaption === true && _self.objectData.caption !== undefined && _self.objectData.caption !== '') {\n\t\t\t\t_self.objects.caption.html(_self.objectData.caption);\n\t\t\t\t_self.objects.caption.show();\n\t\t\t} else {\n\t\t\t\t_self.objects.caption.empty();\n\t\t\t\t_self.objects.caption.hide();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Loads the new object\n\t\t *\n\t\t * @param\t{object}\t$object\n\t\t * @return\t{void}\n\t\t */\n\t\t_loadObject: function ($object) {\n\t\t\t// Load the object\n\t\t\tswitch (_self.objectData.type) {\n\t\t\t\tcase 'inline':\n\t\t\t\t\tif ($(_self.objectData.url)) {\n\t\t\t\t\t\t_self._showContent($object);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_self.error();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ajax':\n\t\t\t\t\t$.ajax(\n\t\t\t\t\t\t$.extend({}, _self.settings.ajax, {\n\t\t\t\t\t\t\turl: _self.objectData.url,\n\t\t\t\t\t\t\ttype: _self.objectData.requestType,\n\t\t\t\t\t\t\tdataType: _self.objectData.requestDataType,\n\t\t\t\t\t\t\tdata: _self.objectData.requestData,\n\t\t\t\t\t\t\tsuccess: function (data, textStatus, jqXHR) {\n\t\t\t\t\t\t\t\t// Unserialize if data is transferred as json\n\t\t\t\t\t\t\t\tif (_self.objectData.requestDataType === 'json') {\n\t\t\t\t\t\t\t\t\t_self.objectData.data = data;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$object.html(data);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t_self._showContent($object);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terror: function (jqXHR, textStatus, errorThrown) {\n\t\t\t\t\t\t\t\t_self.error();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'flash':\n\t\t\t\t\t_self._showContent($object);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'video':\n\t\t\t\t\tif (typeof($object.get(0).canPlayType) === 'function' || _self.objects.case.find('video').length === 0) {\n\t\t\t\t\t\t_self._showContent($object);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_self.error();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tif (_self.objectData.url) {\n\t\t\t\t\t\t$object.on('load', function () {\n\t\t\t\t\t\t\t_self._showContent($object);\n\t\t\t\t\t\t});\n\t\t\t\t\t\t$object.on('error', function () {\n\t\t\t\t\t\t\t_self.error();\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_self.error();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Throws an error message if something went wrong\n\t\t *\n\t\t * @return\t{void}\n\t\t */\n\t\terror: function () {\n\t\t\t_self.objectData.type = 'error';\n\t\t\tvar $object = $('<div class=\"' + _self.settings.classPrefix + 'inlineWrap\"></div>');\n\n\t\t\t$object.html(_self.settings.errorMessage);\n\t\t\t_self.objects.contentInner.html($object);\n\n\t\t\t_self._showContent(_self.objects.contentInner);\n\t\t},\n\n\t\t/**\n\t\t * Calculates the dimensions to fit content\n\t\t *\n\t\t * @param\t{object}\t$object\n\t\t * @return\t{void}\n\t\t */\n\t\t_calculateDimensions: function ($object) {\n\t\t\t_self._cleanupDimensions();\n\n\t\t\t// Set default dimensions\n\t\t\tvar dimensions = {\n\t\t\t\tratio: 1,\n\t\t\t\tobjectWidth: $object.attr('width') ? $object.attr('width') : $object.attr(_self._prefixAttributeName('width')),\n\t\t\t\tobjectHeight: $object.attr('height') ? $object.attr('height') : $object.attr(_self._prefixAttributeName('height'))\n\t\t\t};\n\n\t\t\tif (!_self.settings.disableShrink) {\n\t\t\t\t// Add calculated maximum width/height to dimensions\n\t\t\t\tdimensions.maxWidth = parseInt(_self.dimensions.windowWidth * _self.settings.shrinkFactor);\n\t\t\t\tdimensions.maxHeight = parseInt(_self.dimensions.windowHeight * _self.settings.shrinkFactor);\n\n\t\t\t\t// If the auto calculated maxWidth/maxHeight greather than the user-defined one, use that.\n\t\t\t\tif (dimensions.maxWidth > _self.settings.maxWidth) {\n\t\t\t\t\tdimensions.maxWidth = _self.settings.maxWidth;\n\t\t\t\t}\n\t\t\t\tif (dimensions.maxHeight > _self.settings.maxHeight) {\n\t\t\t\t\tdimensions.maxHeight = _self.settings.maxHeight;\n\t\t\t\t}\n\n\t\t\t\t// Calculate the difference between screen width/height and image width/height\n\t\t\t\tdimensions.differenceWidthAsPercent = parseInt(100 / dimensions.maxWidth * dimensions.objectWidth);\n\t\t\t\tdimensions.differenceHeightAsPercent = parseInt(100 / dimensions.maxHeight * dimensions.objectHeight);\n\n\t\t\t\tswitch (_self.objectData.type) {\n\t\t\t\t\tcase 'image':\n\t\t\t\t\tcase 'flash':\n\t\t\t\t\tcase 'video':\n\t\t\t\t\tcase 'iframe':\n\t\t\t\t\tcase 'ajax':\n\t\t\t\t\tcase 'inline':\n\t\t\t\t\t\tif (_self.objectData.type === 'image' || _self.settings.fixedRatio === true) {\n\t\t\t\t\t\t\tif (dimensions.differenceWidthAsPercent > 100 && dimensions.differenceWidthAsPercent > dimensions.differenceHeightAsPercent) {\n\t\t\t\t\t\t\t\tdimensions.objectWidth = dimensions.maxWidth;\n\t\t\t\t\t\t\t\tdimensions.objectHeight = parseInt(dimensions.objectHeight / dimensions.differenceWidthAsPercent * 100);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (dimensions.differenceHeightAsPercent > 100 && dimensions.differenceHeightAsPercent > dimensions.differenceWidthAsPercent) {\n\t\t\t\t\t\t\t\tdimensions.objectWidth = parseInt(dimensions.objectWidth / dimensions.differenceHeightAsPercent * 100);\n\t\t\t\t\t\t\t\tdimensions.objectHeight = dimensions.maxHeight;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (dimensions.differenceHeightAsPercent > 100 && dimensions.differenceWidthAsPercent < dimensions.differenceHeightAsPercent) {\n\t\t\t\t\t\t\t\tdimensions.objectWidth = parseInt(dimensions.maxWidth / dimensions.differenceHeightAsPercent * dimensions.differenceWidthAsPercent);\n\t\t\t\t\t\t\t\tdimensions.objectHeight = dimensions.maxHeight;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\tif (!isNaN(dimensions.objectWidth) && dimensions.objectWidth > dimensions.maxWidth) {\n\t\t\t\t\t\t\tdimensions.objectWidth = dimensions.maxWidth;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif ((isNaN(dimensions.objectWidth) || dimensions.objectWidth > dimensions.maxWidth) && !_self.settings.forceWidth) {\n\t\t\t\t\t\t\tdimensions.objectWidth = dimensions.maxWidth;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (((isNaN(dimensions.objectHeight) && dimensions.objectHeight !== 'auto') || dimensions.objectHeight > dimensions.maxHeight) && !_self.settings.forceHeight) {\n\t\t\t\t\t\t\tdimensions.objectHeight = dimensions.maxHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (_self.settings.forceWidth) {\n\t\t\t\ttry {\n\t\t\t\t\tdimensions.objectWidth = _self.settings[_self.objectData.type].width;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tdimensions.objectWidth = _self.settings.width || dimensions.objectWidth;\n\t\t\t\t}\n\n\t\t\t\tdimensions.maxWidth = null;\n\t\t\t}\n\t\t\tif ($object.attr(_self._prefixAttributeName('max-width'))) {\n\t\t\t\tdimensions.maxWidth = $object.attr(_self._prefixAttributeName('max-width'));\n\t\t\t}\n\n\t\t\tif (_self.settings.forceHeight) {\n\t\t\t\ttry {\n\t\t\t\t\tdimensions.objectHeight = _self.settings[_self.objectData.type].height;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tdimensions.objectHeight = _self.settings.height || dimensions.objectHeight;\n\t\t\t\t}\n\n\t\t\t\tdimensions.maxHeight = null;\n\t\t\t}\n\t\t\tif ($object.attr(_self._prefixAttributeName('max-height'))) {\n\t\t\t\tdimensions.maxHeight = $object.attr(_self._prefixAttributeName('max-height'));\n\t\t\t}\n\t\t\t_self._adjustDimensions($object, dimensions);\n\t\t},\n\n\t\t/**\n\t\t * Adjusts the dimensions\n\t\t *\n\t\t * @param\t{object}\t$object\n\t\t * @param\t{object}\tdimensions\n\t\t * @return\t{void}\n\t\t */\n\t\t_adjustDimensions: function ($object, dimensions) {\n\t\t\t// Adjust width and height\n\t\t\t$object.css({\n\t\t\t\t'width': dimensions.objectWidth,\n\t\t\t\t'height': dimensions.objectHeight,\n\t\t\t\t'max-width': dimensions.maxWidth,\n\t\t\t\t'max-height': dimensions.maxHeight\n\t\t\t});\n\n\t\t\t_self.objects.contentInner.css({\n\t\t\t\t'width': $object.outerWidth(),\n\t\t\t\t'height': $object.outerHeight(),\n\t\t\t\t'max-width': '100%'\n\t\t\t});\n\n\t\t\t_self.objects.case.css({\n\t\t\t\t'width': _self.objects.contentInner.outerWidth()\n\t\t\t});\n\n\t\t\t// Adjust margin\n\t\t\t_self.objects.case.css({\n\t\t\t\t'margin-top': parseInt(-(_self.objects.case.outerHeight() / 2)),\n\t\t\t\t'margin-left': parseInt(-(_self.objects.case.outerWidth() / 2))\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Handles the _loading\n\t\t *\n\t\t * @param\t{string}\tprocess\n\t\t * @return\t{void}\n\t\t */\n\t\t_loading: function (process) {\n\t\t\tif (process === 'start') {\n\t\t\t\t_self.objects.case.addClass(_self.settings.classPrefix + 'loading');\n\t\t\t\t_self.objects.loading.show();\n\t\t\t} else if (process === 'end') {\n\t\t\t\t_self.objects.case.removeClass(_self.settings.classPrefix + 'loading');\n\t\t\t\t_self.objects.loading.hide();\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Gets the client screen dimensions\n\t\t *\n\t\t * @return\t{object}\tdimensions\n\t\t */\n\t\tgetViewportDimensions: function () {\n\t\t\treturn {\n\t\t\t\twindowWidth: $(window).innerWidth(),\n\t\t\t\twindowHeight: $(window).innerHeight()\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * Verifies the url\n\t\t *\n\t\t * @param\t{string}\tdataUrl\n\t\t * @return\t{object}\tdataUrl\tClean url for processing content\n\t\t */\n\t\t_verifyDataUrl: function (dataUrl) {\n\t\t\tif (!dataUrl || dataUrl === undefined || dataUrl === '') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (dataUrl.indexOf('#') > -1) {\n\t\t\t\tdataUrl = dataUrl.split('#');\n\t\t\t\tdataUrl = '#' + dataUrl[dataUrl.length - 1];\n\t\t\t}\n\n\t\t\treturn _self._normalizeUrl(dataUrl.toString());\n\t\t},\n\n\t\t\t// \n\t\t/**\n\t\t * Tries to get the (file) suffix of an url\n\t\t *\n\t\t * @param\t{string}\turl\n\t\t * @return\t{string}\n\t\t */\n\t\t_getFileUrlSuffix: function (url) {\n\t\t\treturn url.toLowerCase().split('?')[0].split('.')[1];\n\t\t},\n\n\t\t/**\n\t\t * Verifies the data type of the content to load\n\t\t *\n\t\t * @param\t{string}\t\t\turl\n\t\t * @return\t{string|boolean}\tArray key if expression matched, else false\n\t\t */\n\t\t_verifyDataType: function (url) {\n\t\t\tvar typeMapping = _self.settings.typeMapping;\n\n\t\t\t// Early abort if dataUrl couldn't be verified\n\t\t\tif (!url) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Verify the dataType of url according to typeMapping which\n\t\t\t// has been defined in settings.\n\t\t\tfor (var key in typeMapping) {\n\t\t\t\tif (typeMapping.hasOwnProperty(key)) {\n\t\t\t\t\tvar suffixArr = typeMapping[key].split(',');\n\n\t\t\t\t\tfor (var i = 0; i < suffixArr.length; i++) {\n\t\t\t\t\t\tvar suffix = suffixArr[i].toLowerCase(),\n\t\t\t\t\t\t\tregexp = new RegExp('\\.(' + suffix + ')$', 'i'),\n\t\t\t\t\t\t\tstr = url.toLowerCase().split('?')[0].substr(-5);\n\n\t\t\t\t\t\tif (regexp.test(str) === true || (key === 'inline' && (url.indexOf(suffix) > -1))) {\n\t\t\t\t\t\t\treturn key;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If no expression matched, return 'iframe'.\n\t\t\treturn 'iframe';\n\t\t},\n\n\t\t/**\n\t\t * Extends html markup with the essential tags\n\t\t *\n\t\t * @return\t{void}\n\t\t */\n\t\t_addElements: function () {\n\t\t\tif (typeof _self.objects.case !== 'undefined' && $('#' + _self.objects.case.attr('id')).length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_self.settings.markup();\n\t\t},\n\n\t\t/**\n\t\t * Shows the loaded content\n\t\t *\n\t\t * @param\t{object}\t$object\n\t\t * @return\t{void}\n\t\t */\n\t\t_showContent: function ($object) {\n\t\t\t// Add data attribute with the object type\n\t\t\t_self.objects.document.attr(_self._prefixAttributeName('type'), _self.objectData.type);\n\n\t\t\t_self.cache.object = $object;\n\t\t\t_self._calculateDimensions($object);\n\n\t\t\t// Call onFinish hook functions\n\t\t\t_self._callHooks(_self.settings.onFinish);\n\n\t\t\tswitch (_self.transition.in()) {\n\t\t\t\tcase 'scrollTop':\n\t\t\t\tcase 'scrollRight':\n\t\t\t\tcase 'scrollBottom':\n\t\t\t\tcase 'scrollLeft':\n\t\t\t\tcase 'scrollHorizontal':\n\t\t\t\tcase 'scrollVertical':\n\t\t\t\t\t_self.transition.scroll(_self.objects.case, 'in', _self.settings.speedIn);\n\t\t\t\t\t_self.transition.fade(_self.objects.contentInner, 'in', _self.settings.speedIn);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'elastic':\n\t\t\t\t\tif (_self.objects.case.css('opacity') < 1) {\n\t\t\t\t\t\t_self.transition.zoom(_self.objects.case, 'in', _self.settings.speedIn);\n\t\t\t\t\t\t_self.transition.fade(_self.objects.contentInner, 'in', _self.settings.speedIn);\n\t\t\t\t\t}\n\t\t\t\tcase 'fade':\n\t\t\t\tcase 'fadeInline':\n\t\t\t\t\t_self.transition.fade(_self.objects.case, 'in', _self.settings.speedIn);\n\t\t\t\t\t_self.transition.fade(_self.objects.contentInner, 'in', _self.settings.speedIn);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t_self.transition.fade(_self.objects.case, 'in', 0);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// End loading.\n\t\t\t_self._loading('end');\n\t\t\t_self.isBusy = false;\n\t\t\t\n\t\t\t// Set index of the first item opened\n\t\t\tif (!_self.cache.firstOpened) {\n\t\t\t\t_self.cache.firstOpened = _self.objectData.this;\n\t\t\t}\n\n\t\t\t// Fade in the info with delay\n\t\t\t_self.objects.info.hide();\n\t\t\tsetTimeout(function () {\n\t\t\t  _self.transition.fade(_self.objects.info, 'in', _self.settings.speedIn);\n\t\t\t}, _self.settings.speedIn);\n\t\t},\n\n\t\t/**\n\t\t * Processes the content to show\n\t\t *\n\t\t * @return\t{void}\n\t\t */\n\t\t_processContent: function () {\n\t\t\t_self.isBusy = true;\n\n\t\t\t// Fade out the info at first\n\t\t\t_self.transition.fade(_self.objects.info, 'out', 0);\n\n\t\t\tswitch (_self.settings.transitionOut) {\n\t\t\t\tcase 'scrollTop':\n\t\t\t\tcase 'scrollRight':\n\t\t\t\tcase 'scrollBottom':\n\t\t\t\tcase 'scrollLeft':\n\t\t\t\tcase 'scrollVertical':\n\t\t\t\tcase 'scrollHorizontal':\n\t\t\t\t\tif (_self.objects.case.is(':hidden')) {\n\t\t\t\t\t\t_self.transition.fade(_self.objects.contentInner, 'out', 0);\n\t\t\t\t\t\t_self.transition.fade(_self.objects.case, 'out', 0, 0, function () {\n\t\t\t\t\t\t\t_self._loadContent();\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_self.transition.scroll(_self.objects.case, 'out', _self.settings.speedOut, function () {\n\t\t\t\t\t\t\t_self._loadContent();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'fade':\n\t\t\t\t\tif (_self.objects.case.is(':hidden')) {\n\t\t\t\t\t\t_self.transition.fade(_self.objects.case, 'out', 0, 0, function () {\n\t\t\t\t\t\t\t_self._loadContent();\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_self.transition.fade(_self.objects.case, 'out', _self.settings.speedOut, 0, function () {\n\t\t\t\t\t\t\t_self._loadContent();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'fadeInline':\n\t\t\t\tcase 'elastic':\n\t\t\t\t\tif (_self.objects.case.is(':hidden')) {\n\t\t\t\t\t\t_self.transition.fade(_self.objects.case, 'out', 0, 0, function () {\n\t\t\t\t\t\t\t_self._loadContent();\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_self.transition.fade(_self.objects.contentInner, 'out', _self.settings.speedOut, 0, function () {\n\t\t\t\t\t\t\t_self._loadContent();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t_self.transition.fade(_self.objects.case, 'out', 0, 0, function () {\n\t\t\t\t\t\t_self._loadContent();\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Handles events for gallery buttons\n\t\t *\n\t\t * @return\t{void}\n\t\t */\n\t\t_handleEvents: function () {\n\t\t\t_self._unbindEvents();\n\n\t\t\t_self.objects.nav.children().not(_self.objects.close).hide();\n\n\t\t\t// If slideshow is enabled, show play/pause and start timeout.\n\t\t\tif (_self.isSlideshowEnabled()) {\n\t\t\t\t// Only start the timeout if slideshow autostart is enabled and slideshow is not pausing\n\t\t\t\tif (\n\t\t\t\t\t(_self.settings.slideshowAutoStart === true || _self.isSlideshowStarted) &&\n\t\t\t\t\t!_self.objects.nav.hasClass(_self.settings.classPrefix + 'paused')\n\t\t\t\t) {\n\t\t\t\t\t_self._startTimeout();\n\t\t\t\t} else {\n\t\t\t\t\t_self._stopTimeout();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (_self.settings.liveResize) {\n\t\t\t\t_self._watchResizeInteraction();\n\t\t\t}\n\n\t\t\t_self.objects.close.click(function (event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t_self.close();\n\t\t\t});\n\n\t\t\tif (_self.settings.closeOnOverlayClick === true) {\n\t\t\t\t_self.objects.overlay.css('cursor', 'pointer').click(function (event) {\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t_self.close();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (_self.settings.useKeys === true) {\n\t\t\t\t_self._addKeyEvents();\n\t\t\t}\n\n\t\t\tif (_self.objectData.isPartOfSequence) {\n\t\t\t\t_self.objects.nav.attr(_self._prefixAttributeName('ispartofsequence'), true);\n\t\t\t\t_self.objects.nav.data('items', _self._setNavigation());\n\n\t\t\t\t_self.objects.prev.click(function (event) {\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\tif (_self.settings.navigateEndless === true || !_self.item.isFirst()) {\n\t\t\t\t\t\t_self.objects.prev.unbind('click');\n\t\t\t\t\t\t_self.cache.action = 'prev';\n\t\t\t\t\t\t_self.objects.nav.data('items').prev.click();\n\n\t\t\t\t\t\tif (_self.isSlideshowEnabled()) {\n\t\t\t\t\t\t\t_self._stopTimeout();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t_self.objects.next.click(function (event) {\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\tif (_self.settings.navigateEndless === true || !_self.item.isLast()) {\n\t\t\t\t\t\t_self.objects.next.unbind('click');\n\t\t\t\t\t\t_self.cache.action = 'next';\n\t\t\t\t\t\t_self.objects.nav.data('items').next.click();\n\n\t\t\t\t\t\tif (_self.isSlideshowEnabled()) {\n\t\t\t\t\t\t\t_self._stopTimeout();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (_self.isSlideshowEnabled()) {\n\t\t\t\t\t_self.objects.play.click(function (event) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t_self._startTimeout();\n\t\t\t\t\t});\n\t\t\t\t\t_self.objects.pause.click(function (event) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t_self._stopTimeout();\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Enable swiping if activated\n\t\t\t\tif (_self.settings.swipe === true) {\n\t\t\t\t\tif ($.isPlainObject($.event.special.swipeleft)) {\n\t\t\t\t\t\t_self.objects.case.on('swipeleft', function (event) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t_self.objects.next.click();\n\t\t\t\t\t\t\tif (_self.isSlideshowEnabled()) {\n\t\t\t\t\t\t\t\t_self._stopTimeout();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif ($.isPlainObject($.event.special.swiperight)) {\n\t\t\t\t\t\t_self.objects.case.on('swiperight', function (event) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t_self.objects.prev.click();\n\t\t\t\t\t\t\tif (_self.isSlideshowEnabled()) {\n\t\t\t\t\t\t\t\t_self._stopTimeout();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Adds the key events\n\t\t *\n\t\t * @return\t{void}\n\t\t */\n\t\t_addKeyEvents: function () {\n\t\t\t$(document).bind('keyup.lightcase', function (event) {\n\t\t\t\t// Do nothing if lightcase is in process\n\t\t\t\tif (_self.isBusy) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tswitch (event.keyCode) {\n\t\t\t\t\t// Escape key\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\t_self.objects.close.click();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t// Backward key\n\t\t\t\t\tcase 37:\n\t\t\t\t\t\tif (_self.objectData.isPartOfSequence) {\n\t\t\t\t\t\t\t_self.objects.prev.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t// Forward key\n\t\t\t\t\tcase 39:\n\t\t\t\t\t\tif (_self.objectData.isPartOfSequence) {\n\t\t\t\t\t\t\t_self.objects.next.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Starts the slideshow timeout\n\t\t *\n\t\t * @return\t{void}\n\t\t */\n\t\t_startTimeout: function () {\n\t\t\t_self.isSlideshowStarted = true;\n\n\t\t\t_self.objects.play.hide();\n\t\t\t_self.objects.pause.show();\n\n\t\t\t_self.cache.action = 'next';\n\t\t\t_self.objects.nav.removeClass(_self.settings.classPrefix + 'paused');\n\n\t\t\t_self.timeout = setTimeout(function () {\n\t\t\t\t_self.objects.nav.data('items').next.click();\n\t\t\t}, _self.settings.timeout);\n\t\t},\n\n\t\t/**\n\t\t * Stops the slideshow timeout\n\t\t *\n\t\t * @return\t{void}\n\t\t */\n\t\t_stopTimeout: function () {\n\t\t\t_self.objects.play.show();\n\t\t\t_self.objects.pause.hide();\n\n\t\t\t_self.objects.nav.addClass(_self.settings.classPrefix + 'paused');\n\n\t\t\tclearTimeout(_self.timeout);\n\t\t},\n\n\t\t/**\n\t\t * Sets the navigator buttons (prev/next)\n\t\t *\n\t\t * @return\t{object}\titems\n\t\t */\n\t\t_setNavigation: function () {\n\t\t\tvar $links = $((_self.cache.selector || _self.settings.attr)),\n\t\t\t\tsequenceLength = _self.objectData.sequenceLength - 1,\n\t\t\t\titems = {\n\t\t\t\t\tprev: $links.eq(_self.objectData.prevIndex),\n\t\t\t\t\tnext: $links.eq(_self.objectData.nextIndex)\n\t\t\t\t};\n\n\t\t\tif (_self.objectData.currentIndex > 0) {\n\t\t\t\t_self.objects.prev.show();\n\t\t\t} else {\n\t\t\t\titems.prevItem = $links.eq(sequenceLength);\n\t\t\t}\n\t\t\tif (_self.objectData.nextIndex <= sequenceLength) {\n\t\t\t\t_self.objects.next.show();\n\t\t\t} else {\n\t\t\t\titems.next = $links.eq(0);\n\t\t\t}\n\n\t\t\tif (_self.settings.navigateEndless === true) {\n\t\t\t\t_self.objects.prev.show();\n\t\t\t\t_self.objects.next.show();\n\t\t\t}\n\n\t\t\treturn items;\n\t\t},\n\n\t\t/**\n\t\t * Item information/status\n\t\t *\n\t\t */\n\t\titem: {\n\t\t\t/**\n\t\t\t * Verifies if the current item is first item.\n\t\t\t *\n\t\t\t * @return\t{boolean}\n\t\t\t */\n\t\t\tisFirst: function () {\n\t\t\t\treturn (_self.objectData.currentIndex === 0);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Verifies if the current item is first item opened.\n\t\t\t *\n\t\t\t * @return\t{boolean}\n\t\t\t */\n\t\t\tisFirstOpened: function () {\n\t\t\t\treturn _self.objectData.this.is(_self.cache.firstOpened);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Verifies if the current item is last item.\n\t\t\t *\n\t\t\t * @return\t{boolean}\n\t\t\t */\n\t\t\tisLast: function () {\n\t\t\t\treturn (_self.objectData.currentIndex === (_self.objectData.sequenceLength - 1));\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Clones the object for inline elements\n\t\t *\n\t\t * @param\t{object}\t$object\n\t\t * @return\t{object}\t$clone\n\t\t */\n\t\t_cloneObject: function ($object) {\n\t\t\tvar $clone = $object.clone(),\n\t\t\t\tobjectId = $object.attr('id');\n\n\t\t\t// If element is hidden, cache the object and remove\n\t\t\tif ($object.is(':hidden')) {\n\t\t\t\t_self._cacheObjectData($object);\n\t\t\t\t$object.attr('id', _self.settings.idPrefix + 'temp-' + objectId).empty();\n\t\t\t} else {\n\t\t\t\t// Prevent duplicated id's\n\t\t\t\t$clone.removeAttr('id');\n\t\t\t}\n\n\t\t\treturn $clone.show();\n\t\t},\n\n\t\t/**\n\t\t * Verifies if it is a mobile device\n\t\t *\n\t\t * @return\t{boolean}\n\t\t */\n\t\tisMobileDevice: function () {\n\t\t\tvar deviceAgent = navigator.userAgent.toLowerCase(),\n\t\t\t\tagentId = deviceAgent.match(_self.settings.mobileMatchExpression);\n\n\t\t\treturn agentId ? true : false;\n\t\t},\n\n\t\t/**\n\t\t * Verifies if css transitions are supported\n\t\t *\n\t\t * @return\t{string|boolean}\tThe transition prefix if supported, else false.\n\t\t */\n\t\tisTransitionSupported: function () {\n\t\t\tvar body = _self.objects.body.get(0),\n\t\t\t\tisTransitionSupported = false,\n\t\t\t\ttransitionMapping = {\n\t\t\t\t\t'transition': '',\n\t\t\t\t\t'WebkitTransition': '-webkit-',\n\t\t\t\t\t'MozTransition': '-moz-',\n\t\t\t\t\t'OTransition': '-o-',\n\t\t\t\t\t'MsTransition': '-ms-'\n\t\t\t\t};\n\n\t\t\tfor (var key in transitionMapping) {\n\t\t\t\tif (transitionMapping.hasOwnProperty(key) && key in body.style) {\n\t\t\t\t\t_self.support.transition = transitionMapping[key];\n\t\t\t\t\tisTransitionSupported = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn isTransitionSupported;\n\t\t},\n\n\t\t/**\n\t\t * Transition types\n\t\t *\n\t\t */\n\t\ttransition: {\n\t\t\t/**\n\t\t\t * Returns the correct transition type according to the status of interaction.\n\t\t\t *\n\t\t\t * @return\t{string}\tTransition type\n\t\t\t */\n\t\t\tin: function () {\n\t\t\t\tif (_self.settings.transitionOpen && !_self.cache.firstOpened) {\n\t\t\t\t\treturn _self.settings.transitionOpen;\n\t\t\t\t}\n\t\t\t\treturn _self.settings.transitionIn;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Fades in/out the object\n\t\t\t *\n\t\t\t * @param\t{object}\t$object\n\t\t\t * @param\t{string}\ttype\n\t\t\t * @param\t{number}\tspeed\n\t\t\t * @param\t{number}\topacity\n\t\t\t * @param\t{function}\tcallback\n\t\t\t * @return\t{void}\t\tAnimates an object\n\t\t\t */\n\t\t\tfade: function ($object, type, speed, opacity, callback) {\n\t\t\t\tvar isInTransition = type === 'in',\n\t\t\t\t\tstartTransition = {},\n\t\t\t\t\tstartOpacity = $object.css('opacity'),\n\t\t\t\t\tendTransition = {},\n\t\t\t\t\tendOpacity = opacity ? opacity: isInTransition ? 1 : 0;\n\n\t\t\t\tif (!_self.isOpen && isInTransition) return;\n\n\t\t\t\tstartTransition['opacity'] = startOpacity;\n\t\t\t\tendTransition['opacity'] = endOpacity;\n\n\t\t\t\t$object.css(startTransition).show();\n\n\t\t\t\t// Css transition\n\t\t\t\tif (_self.support.transitions) {\n\t\t\t\t\tendTransition[_self.support.transition + 'transition'] = speed + 'ms ease';\n\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t$object.css(endTransition);\n\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t$object.css(_self.support.transition + 'transition', '');\n\n\t\t\t\t\t\t\tif (callback && (_self.isOpen || !isInTransition)) {\n\t\t\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, speed);\n\t\t\t\t\t}, 15);\n\t\t\t\t} else {\n\t\t\t\t\t// Fallback to js transition\n\t\t\t\t\t$object.stop();\n\t\t\t\t\t$object.animate(endTransition, speed, callback);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Scrolls in/out the object\n\t\t\t *\n\t\t\t * @param\t{object}\t$object\n\t\t\t * @param\t{string}\ttype\n\t\t\t * @param\t{number}\tspeed\n\t\t\t * @param\t{function}\tcallback\n\t\t\t * @return\t{void}\t\tAnimates an object\n\t\t\t */\n\t\t\tscroll: function ($object, type, speed, callback) {\n\t\t\t\tvar isInTransition = type === 'in',\n\t\t\t\t\ttransition = isInTransition ? _self.settings.transitionIn : _self.settings.transitionOut,\n\t\t\t\t\tdirection = 'left',\n\t\t\t\t\tstartTransition = {},\n\t\t\t\t\tstartOpacity = isInTransition ? 0 : 1,\n\t\t\t\t\tstartOffset = isInTransition ? '-50%' : '50%',\n\t\t\t\t\tendTransition = {},\n\t\t\t\t\tendOpacity = isInTransition ? 1 : 0,\n\t\t\t\t\tendOffset = isInTransition ? '50%' : '-50%';\n\n\t\t\t\tif (!_self.isOpen && isInTransition) return;\n\n\t\t\t\tswitch (transition) {\n\t\t\t\t\tcase 'scrollTop':\n\t\t\t\t\t\tdirection = 'top';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'scrollRight':\n\t\t\t\t\t\tstartOffset = isInTransition ? '150%' : '50%';\n\t\t\t\t\t\tendOffset = isInTransition ? '50%' : '150%';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'scrollBottom':\n\t\t\t\t\t\tdirection = 'top';\n\t\t\t\t\t\tstartOffset = isInTransition ? '150%' : '50%';\n\t\t\t\t\t\tendOffset = isInTransition ? '50%' : '150%';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'scrollHorizontal':\n\t\t\t\t\t\tstartOffset = isInTransition ? '150%' : '50%';\n\t\t\t\t\t\tendOffset = isInTransition ? '50%' : '-50%';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'scrollVertical':\n\t\t\t\t\t\tdirection = 'top';\n\t\t\t\t\t\tstartOffset = isInTransition ? '-50%' : '50%';\n\t\t\t\t\t\tendOffset = isInTransition ? '50%' : '150%';\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (_self.cache.action === 'prev') {\n\t\t\t\t\tswitch (transition) {\n\t\t\t\t\t\tcase 'scrollHorizontal':\n\t\t\t\t\t\t\tstartOffset = isInTransition ? '-50%' : '50%';\n\t\t\t\t\t\t\tendOffset = isInTransition ? '50%' : '150%';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'scrollVertical':\n\t\t\t\t\t\t\tstartOffset = isInTransition ? '150%' : '50%';\n\t\t\t\t\t\t\tendOffset = isInTransition ? '50%' : '-50%';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstartTransition['opacity'] = startOpacity;\n\t\t\t\tstartTransition[direction] = startOffset;\n\n\t\t\t\tendTransition['opacity'] = endOpacity;\n\t\t\t\tendTransition[direction] = endOffset;\n\n\t\t\t\t$object.css(startTransition).show();\n\n\t\t\t\t// Css transition\n\t\t\t\tif (_self.support.transitions) {\n\t\t\t\t\tendTransition[_self.support.transition + 'transition'] = speed + 'ms ease';\n\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t$object.css(endTransition);\n\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t$object.css(_self.support.transition + 'transition', '');\n\n\t\t\t\t\t\t\tif (callback && (_self.isOpen || !isInTransition)) {\n\t\t\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, speed);\n\t\t\t\t\t}, 15);\n\t\t\t\t} else {\n\t\t\t\t\t// Fallback to js transition\n\t\t\t\t\t$object.stop();\n\t\t\t\t\t$object.animate(endTransition, speed, callback);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Zooms in/out the object\n\t\t\t *\n\t\t\t * @param\t{object}\t$object\n\t\t\t * @param\t{string}\ttype\n\t\t\t * @param\t{number}\tspeed\n\t\t\t * @param\t{function}\tcallback\n\t\t\t * @return\t{void}\t\tAnimates an object\n\t\t\t */\n\t\t\tzoom: function ($object, type, speed, callback) {\n\t\t\t\tvar isInTransition = type === 'in',\n\t\t\t\t\tstartTransition = {},\n\t\t\t\t\tstartOpacity = $object.css('opacity'),\n\t\t\t\t\tstartScale = isInTransition ? 'scale(0.75)' : 'scale(1)',\n\t\t\t\t\tendTransition = {},\n\t\t\t\t\tendOpacity = isInTransition ? 1 : 0,\n\t\t\t\t\tendScale = isInTransition ? 'scale(1)' : 'scale(0.75)';\n\n\t\t\t\tif (!_self.isOpen && isInTransition) return;\n\n\t\t\t\tstartTransition['opacity'] = startOpacity;\n\t\t\t\tstartTransition[_self.support.transition + 'transform'] = startScale;\n\n\t\t\t\tendTransition['opacity'] = endOpacity;\n\n\t\t\t\t$object.css(startTransition).show();\n\n\t\t\t\t// Css transition\n\t\t\t\tif (_self.support.transitions) {\n\t\t\t\t\tendTransition[_self.support.transition + 'transform'] = endScale;\n\t\t\t\t\tendTransition[_self.support.transition + 'transition'] = speed + 'ms ease';\n\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t$object.css(endTransition);\n\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t$object.css(_self.support.transition + 'transform', '');\n\t\t\t\t\t\t\t$object.css(_self.support.transition + 'transition', '');\n\n\t\t\t\t\t\t\tif (callback && (_self.isOpen || !isInTransition)) {\n\t\t\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, speed);\n\t\t\t\t\t}, 15);\n\t\t\t\t} else {\n\t\t\t\t\t// Fallback to js transition\n\t\t\t\t\t$object.stop();\n\t\t\t\t\t$object.animate(endTransition, speed, callback);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Calls all the registered functions of a specific hook\n\t\t *\n\t\t * @param\t{object}\thooks\n\t\t * @return\t{void}\n\t\t */\n\t\t_callHooks: function (hooks) {\n\t\t\tif (typeof(hooks) === 'object') {\n\t\t\t\t$.each(hooks, function(index, hook) {\n\t\t\t\t\tif (typeof(hook) === 'function') {\n\t\t\t\t\t\thook.call(_self.origin);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Caches the object data\n\t\t *\n\t\t * @param\t{object}\t$object\n\t\t * @return\t{void}\n\t\t */\n\t\t_cacheObjectData: function ($object) {\n\t\t\t$.data($object, 'cache', {\n\t\t\t\tid: $object.attr('id'),\n\t\t\t\tcontent: $object.html()\n\t\t\t});\n\n\t\t\t_self.cache.originalObject = $object;\n\t\t},\n\n\t\t/**\n\t\t * Restores the object from cache\n\t\t *\n\t\t * @return\tvoid\n\t\t */\n\t\t_restoreObject: function () {\n\t\t\tvar $object = $('[id^=\"' + _self.settings.idPrefix + 'temp-\"]');\n\n\t\t\t$object.attr('id', $.data(_self.cache.originalObject, 'cache').id);\n\t\t\t$object.html($.data(_self.cache.originalObject, 'cache').content);\n\t\t},\n\n\t\t/**\n\t\t * Executes functions for a window resize.\n\t\t * It stops an eventual timeout and recalculates dimenstions.\n\t\t *\n\t\t * @return\t{void}\n\t\t */\n\t\tresize: function () {\n\t\t\tif (!_self.isOpen) return;\n\n\t\t\tif (_self.isSlideshowEnabled()) {\n\t\t\t\t_self._stopTimeout();\n\t\t\t}\n\n\t\t\t_self.dimensions = _self.getViewportDimensions();\n\t\t\t_self._calculateDimensions(_self.cache.object);\n\n\t\t\t// Call onResize hook functions\n\t\t\t_self._callHooks(_self.settings.onResize);\n\t\t},\n\n\t\t/**\n\t\t * Watches for any resize interaction and caches the new sizes.\n\t\t *\n\t\t * @return\t{void}\n\t\t */\n\t\t_watchResizeInteraction: function () {\n\t\t\t$(window).resize(_self.resize);\n\t\t},\n\n\t\t/**\n\t\t * Stop watching any resize interaction related to _self.\n\t\t *\n\t\t * @return\t{void}\n\t\t */\n\t\t_unwatchResizeInteraction: function () {\n\t\t\t$(window).off('resize', _self.resize);\n\t\t},\n\n\t\t/**\n\t\t * Switches to the fullscreen mode\n\t\t *\n\t\t * @return\t{void}\n\t\t */\n\t\t_switchToFullScreenMode: function () {\n\t\t\t_self.settings.shrinkFactor = 1;\n\t\t\t_self.settings.overlayOpacity = 1;\n\n\t\t\t$('html').addClass(_self.settings.classPrefix + 'fullScreenMode');\n\t\t},\n\n\t\t/**\n\t\t * Enters into the lightcase view\n\t\t *\n\t\t * @return\t{void}\n\t\t */\n\t\t_open: function () {\n\t\t\t_self.isOpen = true;\n\n\t\t\t_self.support.transitions = _self.settings.cssTransitions ? _self.isTransitionSupported() : false;\n\t\t\t_self.support.mobileDevice = _self.isMobileDevice();\n\n\t\t\tif (_self.support.mobileDevice) {\n\t\t\t\t$('html').addClass(_self.settings.classPrefix + 'isMobileDevice');\n\n\t\t\t\tif (_self.settings.fullScreenModeForMobile) {\n\t\t\t\t\t_self._switchToFullScreenMode();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!_self.settings.transitionIn) {\n\t\t\t\t_self.settings.transitionIn = _self.settings.transition;\n\t\t\t}\n\t\t\tif (!_self.settings.transitionOut) {\n\t\t\t\t_self.settings.transitionOut = _self.settings.transition;\n\t\t\t}\n\n\t\t\tswitch (_self.transition.in()) {\n\t\t\t\tcase 'fade':\n\t\t\t\tcase 'fadeInline':\n\t\t\t\tcase 'elastic':\n\t\t\t\tcase 'scrollTop':\n\t\t\t\tcase 'scrollRight':\n\t\t\t\tcase 'scrollBottom':\n\t\t\t\tcase 'scrollLeft':\n\t\t\t\tcase 'scrollVertical':\n\t\t\t\tcase 'scrollHorizontal':\n\t\t\t\t\tif (_self.objects.case.is(':hidden')) {\n\t\t\t\t\t\t_self.objects.close.css('opacity', 0);\n\t\t\t\t\t\t_self.objects.overlay.css('opacity', 0);\n\t\t\t\t\t\t_self.objects.case.css('opacity', 0);\n\t\t\t\t\t\t_self.objects.contentInner.css('opacity', 0);\n\t\t\t\t\t}\n\t\t\t\t\t_self.transition.fade(_self.objects.overlay, 'in', _self.settings.speedIn, _self.settings.overlayOpacity, function () {\n\t\t\t\t\t\t_self.transition.fade(_self.objects.close, 'in', _self.settings.speedIn);\n\t\t\t\t\t\t_self._handleEvents();\n\t\t\t\t\t\t_self._processContent();\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t_self.transition.fade(_self.objects.overlay, 'in', 0, _self.settings.overlayOpacity, function () {\n\t\t\t\t\t\t_self.transition.fade(_self.objects.close, 'in', 0);\n\t\t\t\t\t\t_self._handleEvents();\n\t\t\t\t\t\t_self._processContent();\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t_self.objects.document.addClass(_self.settings.classPrefix + 'open');\n\t\t\t_self.objects.case.attr('aria-hidden', 'false');\n\t\t},\n\n\t\t/**\n\t\t * Escapes from the lightcase view\n\t\t *\n\t\t * @return\t{void}\n\t\t */\n\t\tclose: function () {\n\t\t\t_self.isOpen = false;\n\n\t\t\tif (_self.isSlideshowEnabled()) {\n\t\t\t\t_self._stopTimeout();\n\t\t\t\t_self.isSlideshowStarted = false;\n\t\t\t\t_self.objects.nav.removeClass(_self.settings.classPrefix + 'paused');\n\t\t\t}\n\n\t\t\t_self.objects.loading.hide();\n\n\t\t\t_self._unbindEvents();\n\n\t\t\t_self._unwatchResizeInteraction();\n\n\t\t\t$('html').removeClass(_self.settings.classPrefix + 'open');\n\t\t\t_self.objects.case.attr('aria-hidden', 'true');\n\n\t\t\t_self.objects.nav.children().hide();\n\t\t\t_self.objects.close.hide();\n\n\t\t\t// Call onClose hook functions\n\t\t\t_self._callHooks(_self.settings.onClose);\n\n\t\t\t// Fade out the info at first\n\t\t\t_self.transition.fade(_self.objects.info, 'out', 0);\n\n\t\t\tswitch (_self.settings.transitionClose || _self.settings.transitionOut) {\n\t\t\t\tcase 'fade':\n\t\t\t\tcase 'fadeInline':\n\t\t\t\tcase 'scrollTop':\n\t\t\t\tcase 'scrollRight':\n\t\t\t\tcase 'scrollBottom':\n\t\t\t\tcase 'scrollLeft':\n\t\t\t\tcase 'scrollHorizontal':\n\t\t\t\tcase 'scrollVertical':\n\t\t\t\t\t_self.transition.fade(_self.objects.case, 'out', _self.settings.speedOut, 0, function () {\n\t\t\t\t\t\t_self.transition.fade(_self.objects.overlay, 'out', _self.settings.speedOut, 0, function () {\n\t\t\t\t\t\t\t_self.cleanup();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'elastic':\n\t\t\t\t\t_self.transition.zoom(_self.objects.case, 'out', _self.settings.speedOut, function () {\n\t\t\t\t\t\t_self.transition.fade(_self.objects.overlay, 'out', _self.settings.speedOut, 0, function () {\n\t\t\t\t\t\t\t_self.cleanup();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t_self.cleanup();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Unbinds all given events\n\t\t *\n\t\t * @return\t{void}\n\t\t */\n\t\t_unbindEvents: function () {\n\t\t\t// Unbind overlay event\n\t\t\t_self.objects.overlay.unbind('click');\n\n\t\t\t// Unbind key events\n\t\t\t$(document).unbind('keyup.lightcase');\n\n\t\t\t// Unbind swipe events\n\t\t\t_self.objects.case.unbind('swipeleft').unbind('swiperight');\n\n\t\t\t// Unbind navigator events\n\t\t\t_self.objects.prev.unbind('click');\n\t\t\t_self.objects.next.unbind('click');\n\t\t\t_self.objects.play.unbind('click');\n\t\t\t_self.objects.pause.unbind('click');\n\n\t\t\t// Unbind close event\n\t\t\t_self.objects.close.unbind('click');\n\t\t},\n\n\t\t/**\n\t\t * Cleans up the dimensions\n\t\t *\n\t\t * @return\t{void}\n\t\t */\n\t\t_cleanupDimensions: function () {\n\t\t\tvar opacity = _self.objects.contentInner.css('opacity');\n\n\t\t\t_self.objects.case.css({\n\t\t\t\t'width': '',\n\t\t\t\t'height': '',\n\t\t\t\t'top': '',\n\t\t\t\t'left': '',\n\t\t\t\t'margin-top': '',\n\t\t\t\t'margin-left': ''\n\t\t\t});\n\n\t\t\t_self.objects.contentInner.removeAttr('style').css('opacity', opacity);\n\t\t\t_self.objects.contentInner.children().removeAttr('style');\n\t\t},\n\n\t\t/**\n\t\t * Cleanup after aborting lightcase\n\t\t *\n\t\t * @return\t{void}\n\t\t */\n\t\tcleanup: function () {\n\t\t\t_self._cleanupDimensions();\n\n\t\t\t_self.objects.loading.hide();\n\t\t\t_self.objects.overlay.hide();\n\t\t\t_self.objects.case.hide();\n\t\t\t_self.objects.prev.hide();\n\t\t\t_self.objects.next.hide();\n\t\t\t_self.objects.play.hide();\n\t\t\t_self.objects.pause.hide();\n\n\t\t\t_self.objects.document.removeAttr(_self._prefixAttributeName('type'));\n\t\t\t_self.objects.nav.removeAttr(_self._prefixAttributeName('ispartofsequence'));\n\n\t\t\t_self.objects.contentInner.empty().hide();\n\t\t\t_self.objects.info.children().empty();\n\n\t\t\tif (_self.cache.originalObject) {\n\t\t\t\t_self._restoreObject();\n\t\t\t}\n\n\t\t\t// Call onCleanup hook functions\n\t\t\t_self._callHooks(_self.settings.onCleanup);\n\n\t\t\t// Restore cache\n\t\t\t_self.cache = {};\n\t\t},\n\n\t\t/**\n\t\t * Returns the supported match media or undefined if the browser\n\t\t * doesn't support match media.\n\t\t *\n\t\t * @return\t{mixed}\n\t\t */\n\t\t_matchMedia: function () {\n\t\t\treturn window.matchMedia || window.msMatchMedia;\n\t\t},\n\n\t\t/**\n\t\t * Returns the devicePixelRatio if supported. Else, it simply returns\n\t\t * 1 as the default.\n\t\t *\n\t\t * @return\t{number}\n\t\t */\n\t\t_devicePixelRatio: function () {\n\t\t\treturn window.devicePixelRatio || 1;\n\t\t},\n\n\t\t/**\n\t\t * Checks if method is public\n\t\t *\n\t\t * @return\t{boolean}\n\t\t */\n\t\t_isPublicMethod: function (method) {\n\t\t\treturn (typeof _self[method] === 'function' && method.charAt(0) !== '_');\n\t\t},\n\n\t\t/**\n\t\t * Exports all public methods to be accessible, callable\n\t\t * from global scope.\n\t\t *\n\t\t * @return\t{void}\n\t\t */\n\t\t_export: function () {\n\t\t\twindow.lightcase = {};\n\n\t\t\t$.each(_self, function (property) {\n\t\t\t\tif (_self._isPublicMethod(property)) {\n\t\t\t\t\tlightcase[property] = _self[property];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\t_self._export();\n\n\t$.fn.lightcase = function (method) {\n\t\t// Method calling logic (only public methods are applied)\n\t\tif (_self._isPublicMethod(method)) {\n\t\t\treturn _self[method].apply(this, Array.prototype.slice.call(arguments, 1));\n\t\t} else if (typeof method === 'object' || !method) {\n\t\t\treturn _self.init.apply(this, arguments);\n\t\t} else {\n\t\t\t$.error('Method ' + method + ' does not exist on jQuery.lightcase');\n\t\t}\n\t};\n})(jQuery);\n"],"names":["$","_self","jQuery","cache","support","objects","init","options","this","each","unbind","bind","event","preventDefault","lightcase","start","origin","settings","extend","idPrefix","classPrefix","attrPrefix","transition","transitionOpen","transitionClose","transitionIn","transitionOut","cssTransitions","speedIn","speedOut","width","height","maxWidth","maxHeight","forceWidth","forceHeight","liveResize","fullScreenModeForMobile","mobileMatchExpression","disableShrink","fixedRatio","shrinkFactor","overlayOpacity","slideshow","slideshowAutoStart","timeout","swipe","useKeys","useCategories","useAsCollection","navigateEndless","closeOnOverlayClick","title","caption","showTitle","showCaption","showSequenceInfo","inline","ajax","type","dataType","data","iframe","frameborder","flash","wmode","video","poster","preload","controls","autobuffer","autoplay","loop","attr","href","typeMapping","image","errorMessage","labels","close","markup","body","append","overlay","loading","case","after","nav","prev","hide","next","play","pause","content","info","contentInner","sequenceInfo","onInit","onStart","onFinish","onResize","onClose","onCleanup","document","_callHooks","objectData","_setObjectData","_addElements","_open","dimensions","getViewportDimensions","get","name","getObjectData","object","$object","_prefixAttributeName","children","url","_determineUrl","requestType","requestData","requestDataType","rel","_determineAttributeSelector","_verifyDataType","isPartOfSequence","_isPartOfSequence","isPartOfSequenceWithSlideshow","currentIndex","index","sequenceLength","length","prevIndex","nextIndex","_determineLinkTarget","$origin","selector","categories","split","category","dataUrl","_verifyDataUrl","density","supportLevel","src","createElement","videoType","_getFileUrlSuffix","canPlayType","_devicePixelRatio","_matchMedia","matches","_normalizeUrl","url1","srcExp","map","str","trim","forEach","i","value","substring","lastChar","intVal","parseInt","floatVal","parseFloat","test","isNaN","expression","getSimilarLinks","RegExp","isSlideshowEnabled","_loadContent","originalObject","_restoreObject","_createObject","Image","alt","html","_cloneObject","_addObject","_loadObject","_loading","show","empty","undefined","_showContent","error","success","textStatus","jqXHR","errorThrown","find","on","_calculateDimensions","_cleanupDimensions","ratio","objectWidth","objectHeight","windowWidth","windowHeight","differenceWidthAsPercent","differenceHeightAsPercent","e","_adjustDimensions","css","outerWidth","outerHeight","process","addClass","removeClass","window","innerWidth","innerHeight","indexOf","toString","toLowerCase","key","hasOwnProperty","suffixArr","suffix","regexp","substr","in","scroll","fade","zoom","isBusy","firstOpened","setTimeout","_processContent","is","_handleEvents","_unbindEvents","not","isSlideshowStarted","hasClass","_stopTimeout","_startTimeout","_watchResizeInteraction","click","_addKeyEvents","_setNavigation","item","isFirst","action","isLast","isPlainObject","special","swipeleft","swiperight","keyCode","clearTimeout","$links","items","eq","prevItem","isFirstOpened","$clone","clone","objectId","_cacheObjectData","removeAttr","isMobileDevice","navigator","userAgent","match","isTransitionSupported","transitionMapping","WebkitTransition","MozTransition","OTransition","MsTransition","style","speed","opacity","callback","isInTransition","startTransition","startOpacity","endTransition","endOpacity","isOpen","transitions","stop","animate","direction","startOffset","endOffset","startScale","endScale","hooks","hook","call","id","resize","_unwatchResizeInteraction","off","_switchToFullScreenMode","mobileDevice","cleanup","top","left","matchMedia","msMatchMedia","devicePixelRatio","_isPublicMethod","method","charAt","_export","property","fn","apply","Array","prototype","slice","arguments"],"version":3,"file":"index.3054f56c.js.map"}